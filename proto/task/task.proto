syntax = "proto3";
package task;
option go_package = "github.com/kitoyanok66/inote-protos/proto/task";

import "google/protobuf/timestamp.proto";

enum TaskStatus {
    TASK_STATUS_NEW = 0;
    TASK_STATUS_IN_PROGRESS = 1;
    TASK_STATUS_DONE = 2;
}

message Task {
    string id = 1;
    string user_id = 2;
    string title = 3;
    string description = 4;
    TaskStatus status = 5;
    google.protobuf.Timestamp created_at = 6;
    google.protobuf.Timestamp due_date = 7;
}

message CreateTaskRequest {
    string user_id = 1;
    string title = 2;
    string description = 3;
    google.protobuf.Timestamp due_date = 4;
}

message CreateTaskResponse {
    bool success = 1;
    string message = 2;
    Task task = 3;
}

message GetTaskRequest {
    string id = 1;
}

message GetTaskResponse {
    Task task = 1;
}

message GetTasksByUserRequest {
    string user_id = 1;
}

message GetTasksByUserResponse {
    repeated Task tasks = 1;
}

message UpdateTaskRequest {
    Task task = 1;
}

message UpdateTaskResponse {
    bool success = 1;
    string message = 2;
    Task task = 3;
}

message DeleteTaskRequest {
    string id = 1;
}

message DeleteTaskResponse {
    bool success = 1;
    string message = 2;
}

service TaskService {
    rpc CreateTask(CreateTaskRequest) returns (CreateTaskResponse);
    rpc GetTask(GetTaskRequest) returns (GetTaskResponse);
    rpc GetTasksByUser(GetTasksByUserRequest) returns (GetTasksByUserResponse);
    rpc UpdateTask (UpdateTaskRequest) returns (UpdateTaskResponse);
    rpc DeleteTask (DeleteTaskRequest) returns (DeleteTaskResponse);
}